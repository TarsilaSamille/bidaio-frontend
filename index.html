<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tradutor Bidaio Jagoy - Plataforma de IA</title>

    <!-- Google Fonts: Crimson Text & Lato -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Crimson+Text:wght@400;700&family=Lato:wght@400;700&display=swap"
        rel="stylesheet">

    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        // Configuração do Tailwind para o novo tema formal
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'primary-dark': '#0D2C4D',      // Azul Marinho Sóbrio
                        'primary-accent': '#B49B6C',    // Dourado Mudo
                        'neutral-bg': '#F8F9FA',        // Cinza de Fundo Claro
                        'neutral-card': '#FFFFFF',      // Branco para Cards
                        'neutral-text': '#343A40',      // Cinza Escuro para Texto
                        'neutral-border': '#DEE2E6',    // Cinza para Bordas
                    },
                    fontFamily: {
                        'serif': ['Crimson Text', 'serif'],
                        'sans': ['Lato', 'sans-serif'],
                    }
                }
            }
        }
    </script>

    <link rel="stylesheet" href="styles.css">

</head>

<body class="p-4 md:p-8">
    <div class="max-w-7xl mx-auto">
        <!-- Seletor de Idioma -->
        <div class="flex justify-end mb-4">
            <div class="relative">
                <button id="lang-selector-btn" onclick="toggleLangDropdown()"
                    class="secondary-button py-2 px-4 flex items-center gap-2">
                    <span id="current-lang-text">Português</span>
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                        xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                    </svg>
                </button>
                <div id="lang-dropdown"
                    class="lang-dropdown-menu hidden absolute right-0 mt-2 w-48 bg-white rounded-md z-10">
                    <a href="#" onclick="changeLanguage('pt')"
                        class="block px-4 py-2 text-sm text-neutral-text hover:bg-neutral-bg">Português</a>
                    <a href="#" onclick="changeLanguage('en')"
                        class="block px-4 py-2 text-sm text-neutral-text hover:bg-neutral-bg">English</a>
                    <a href="#" onclick="changeLanguage('id')"
                        class="block px-4 py-2 text-sm text-neutral-text hover:bg-neutral-bg">Bahasa Indonesia</a>
                </div>
            </div>
        </div>

        <!-- Header -->
        <div class="text-center mb-12">
            <h1 class="text-5xl md:text-6xl font-serif mb-2" data-translate-key="main_title">
                Tradutor Bidaio Jagoy
            </h1>
            <p class="text-lg text-neutral-text font-sans" data-translate-key="main_subtitle">
                Plataforma de Tradução com IA • Edição de Dados em Tempo Real
            </p>
        </div>

        <!-- Tab Navigation -->
        <div class="flex gap-3 mb-8 justify-center flex-wrap border-b border-neutral-border">
            <button class="tab-button active" onclick="switchTab('translator')"
                data-translate-key="tab_translator">Tradutor</button>
            <button class="tab-button" onclick="switchTab('dictionary')"
                data-translate-key="tab_dictionary">Dicionário</button>
            <button class="tab-button" onclick="switchTab('corpus')" data-translate-key="tab_corpus">Corpus</button>
            <button class="tab-button" onclick="switchTab('grammar')"
                data-translate-key="tab_grammar">Gramática</button>
        </div>

        <!-- TAB 1: TRADUTOR -->
        <div id="tab-translator" class="tab-content">
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <!-- Tradutor Principal -->
                <div class="lg:col-span-2">
                    <div class="formal-card p-8">
                        <h2 class="text-3xl font-serif mb-6" data-translate-key="translate_title">Traduzir Texto</h2>
                        <textarea id="inputText" data-translate-key="placeholder_input"
                            placeholder="Digite seu texto em Português, Inglês ou Indonésio aqui..."
                            class="w-full h-40 p-4 rounded-md border border-neutral-border bg-white focus:outline-none focus:ring-2 focus:ring-primary-accent resize-none"></textarea>
                        <button id="translateBtn" onclick="handleTranslate()"
                            class="primary-button w-full mt-6 py-4 text-lg"
                            data-translate-key="translate_button">Traduzir</button>
                    </div>

                    <!-- Resultado -->
                    <div id="resultContainer" class="hidden mt-8">
                        <div class="formal-card p-8">
                            <h3 class="text-2xl font-serif mb-6" data-translate-key="result_title">Resultado da Tradução
                            </h3>
                            <div class="mb-8">
                                <label class="block text-sm font-semibold text-neutral-text mb-3"
                                    data-translate-key="confidence_label">Nível de Confiança</label>
                                <div class="flex items-center gap-4">
                                    <div class="confidence-bar flex-1">
                                        <div id="confidenceFill" class="confidence-fill" style="width: 0%"></div>
                                    </div>
                                    <span id="confidenceText" class="text-lg font-bold text-primary-dark">0/5</span>
                                </div>
                            </div>
                            <div class="mb-8">
                                <label class="block text-sm font-semibold text-neutral-text mb-3"
                                    data-translate-key="bidaio_translation_label">Tradução em Bidaio</label>
                                <p id="translationText"
                                    class="text-xl font-serif text-primary-dark bg-neutral-bg p-6 rounded-md border border-neutral-border">
                                </p>
                            </div>
                            <div class="mb-8">
                                <label class="block text-sm font-semibold text-neutral-text mb-3"
                                    data-translate-key="correction_label">Sugerir Correção</label>
                                <textarea id="correctionText" data-translate-key="placeholder_correction"
                                    placeholder="Se a tradução pode ser melhorada, por favor, sugira uma correção aqui..."
                                    class="w-full h-24 p-4 rounded-md border border-neutral-border bg-white focus:outline-none focus:ring-2 focus:ring-primary-accent resize-none"></textarea>
                                <button onclick="submitCorrection()" class="secondary-button w-full mt-3 py-2"
                                    data-translate-key="send_correction_button">Enviar Correção</button>
                            </div>
                            <details class="border-t border-neutral-border pt-6">
                                <summary
                                    class="cursor-pointer font-serif text-lg text-primary-dark hover:text-primary-accent"
                                    data-translate-key="reasoning_summary">Análise da Tradução</summary>
                                <p id="reasoningText"
                                    class="mt-4 text-sm text-neutral-text bg-neutral-bg p-4 rounded-md whitespace-pre-wrap">
                                </p>
                            </details>

                            <details class="border-t border-neutral-border pt-6">
                                <summary
                                    class="cursor-pointer font-serif text-lg text-primary-dark hover:text-primary-accent">
                                    Prompt Completo
                                    (Debug)</summary>
                                <pre id="fullPromptText" class="mt-4 text-xs text-neutral-text bg-neutral-bg p-4 rounded-md whitespace-pre-wrap
                                overflow-auto max-h-96"></pre>
                            </details>
                            <div class="flex gap-4 mt-8">
                                <button onclick="copyToClipboard()" class="primary-button flex-1 py-3"
                                    data-translate-key="copy_button">Copiar</button>
                                <button onclick="downloadTranslation()" class="secondary-button flex-1 py-3"
                                    data-translate-key="download_button">Baixar</button>
                            </div>
                        </div>
                    </div>

                    <div class="mt-8">
                        <h3 class="text-2xl font-serif mb-4" data-translate-key="examples_title">Exemplos Similares do
                            Corpus</h3>
                        <div id="examplesContainer" class="space-y-4">
                            <p class="text-gray-600 italic" data-translate-key="examples_placeholder">Insira um texto e
                                clique em "Traduzir" para visualizar exemplos relacionados.</p>
                        </div>
                    </div>
                </div>

                <!-- Sidebar -->
                <div>
                    <div class="formal-card p-8 sticky top-8">
                        <h3 class="text-2xl font-serif mb-6" data-translate-key="status_title">Status do Sistema</h3>
                        <div class="space-y-4 text-sm">
                            <div><label class="font-semibold text-neutral-text"
                                    data-translate-key="status_dict">Dicionário:</label>
                                <p id="dictStats" class="text-gray-600">Carregando...</p>
                            </div>
                            <div><label class="font-semibold text-neutral-text"
                                    data-translate-key="status_corpus">Corpus:</label>
                                <p id="corpusStats" class="text-gray-600">Carregando...</p>
                            </div>
                            <div><label class="font-semibold text-neutral-text"
                                    data-translate-key="status_grammar">Regras Gramaticais:</label>
                                <p id="grammarStats" class="text-gray-600">Carregando...</p>
                            </div>
                            <div><label class="font-semibold text-neutral-text" data-translate-key="status_api">API
                                    Status:</label>
                                <p id="apiStatus" class="text-gray-600">Verificando...</p>
                            </div>
                        </div>
                        <hr class="my-6 border-neutral-border">
                        <button onclick="downloadAllFiles()" class="secondary-button w-full py-2 text-sm"
                            data-translate-key="download_all_button">Baixar Todos os Arquivos</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Outras abas (Dicionário, Corpus, Gramática) com chaves de tradução -->
        <div id="tab-dictionary" class="tab-content hidden">
            <div class="formal-card p-8">
                <h2 class="text-3xl font-serif mb-6" data-translate-key="dict_title">Gerenciar Dicionário</h2>
                <div class="mb-8"><input type="text" id="dictSearch" data-translate-key="placeholder_dict_search"
                        placeholder="Buscar palavra no dicionário..."
                        class="w-full p-4 rounded-md border border-neutral-border bg-white focus:outline-none focus:ring-2 focus:ring-primary-accent"
                        onkeyup="searchDictionary()"></div>
                <div class="mb-8 flex gap-4">
                    <button onclick="downloadDictJSON()" class="secondary-button py-2 px-6"
                        data-translate-key="download_json_button">Baixar JSON</button>
                    <button onclick="downloadDictCSV()" class="primary-button py-2 px-6"
                        data-translate-key="download_csv_button">Baixar
                        CSV</button>
                </div>
                <div id="dictContainer" class="space-y-3 max-h-96 overflow-y-auto">
                    <p class="text-gray-600 italic" data-translate-key="loading_dict">Carregando dicionário...</p>
                </div>
            </div>
        </div>
        <div id="tab-corpus" class="tab-content hidden">
            <div class="formal-card p-8">
                <h2 class="text-3xl font-serif mb-6" data-translate-key="corpus_title">Gerenciar Corpus</h2>
                <div class="mb-8"><input type="text" id="corpusSearch" data-translate-key="placeholder_corpus_search"
                        placeholder="Buscar frase no corpus..."
                        class="w-full p-4 rounded-md border border-neutral-border bg-white focus:outline-none focus:ring-2 focus:ring-primary-accent"
                        onkeyup="searchCorpus()"></div>
                <div class="mb-8 flex gap-4">
                    <button onclick="downloadCorpusJSON()" class="secondary-button py-2 px-6"
                        data-translate-key="download_json_button">Baixar JSON</button>
                    <button onclick="downloadCorpusCSV()" class="primary-button py-2 px-6"
                        data-translate-key="download_csv_button">Baixar CSV</button>
                </div>
                <div id="corpusContainer" class="space-y-4 max-h-96 overflow-y-auto">
                    <p class="text-gray-600 italic" data-translate-key="loading_corpus">Carregando corpus...</p>
                </div>
            </div>
        </div>
        <div id="tab-grammar" class="tab-content hidden">
            <div class="formal-card p-8">
                <h2 class="text-3xl font-serif mb-6" data-translate-key="grammar_title">Regras Gramaticais</h2>
                <div class="mb-8 flex gap-4">
                    <button onclick="downloadGrammarJSON()" class="secondary-button py-2 px-6"
                        data-translate-key="download_json_button">Baixar JSON</button>
                    <button onclick="downloadGrammarCSV()" class="primary-button py-2 px-6"
                        data-translate-key="download_csv_button">Baixar CSV</button>
                </div>
                <div id="grammarContainer" class="space-y-4 max-h-96 overflow-y-auto">
                    <p class="text-gray-600 italic" data-translate-key="loading_grammar">Carregando regras
                        gramaticais...</p>
                </div>
            </div>
        </div>
    </div>

    <script>
    
        document.addEventListener('DOMContentLoaded', () => {
            changeLanguage(currentLanguage); // Define o idioma inicial
            switchTab('translator'); // Define a aba inicial
        });
    </script>


    <script src="js/script.js"></script>
    <script src="js/traducoes.js"></script>
    <script src="js/download.js"></script>
    <script src="js/dicionario.js"></script>
    <script src="js/corpus.js"></script>
    <script src="js/gramatica.js"></script>
    <script src="js/utils.js"></script>
</body>

</html>